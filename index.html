<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>استبيان أنماط التعلم - Learning Styles Assessment</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&family=Poppins:wght@300;400;600;700;800&display=swap');
    body {
      font-family: 'Cairo', 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      min-height: 100vh;
      color: #000000;
    }
    .text-primary { color: #000 !important; font-weight: 600; }
    .text-secondary { color: #1a1a1a !important; font-weight: 500; }
    .glass-effect {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .floating-animation { animation: float 6s ease-in-out infinite; }
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    .slide-in { animation: slideIn 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .option-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .option-hover:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 15px 35px rgba(0,0,0,0.15); }
    .progress-glow { box-shadow: 0 0 20px rgba(102,126,234,0.5); }
    .pulse-glow { animation: pulseGlow 2s infinite; }
    @keyframes pulseGlow {
      0%,100% { box-shadow: 0 0 20px rgba(102,126,234,0.3); }
      50% { box-shadow: 0 0 30px rgba(102,126,234,0.6); }
    }
    .result-animation { animation: resultReveal 1s cubic-bezier(0.4,0,0.2,1) forwards; }
    @keyframes resultReveal {
      from { opacity:0; transform: scale(0.8) rotateY(90deg); }
      to { opacity:1; transform: scale(1) rotateY(0deg); }
    }
    .score-bar-animation { animation: scoreGrow 1.5s ease-out forwards; }
    @keyframes scoreGrow { from { width:0%; } }
    .floating-shapes { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:-1; }
    .shape { position:absolute; opacity:0.1; }
    .shape-1 { top:10%; left:10%; animation:float 8s ease-in-out infinite; }
    .shape-2 { top:20%; right:15%; animation:float 6s ease-in-out infinite 1s; }
    .shape-3 { bottom:30%; left:20%; animation:float 7s ease-in-out infinite 2s; }
    .shape-4 { bottom:20%; right:10%; animation:float 9s ease-in-out infinite 3s; }
    .language-toggle { transition: all 0.3s ease; }
    .language-toggle:hover { transform: scale(1.05); }
    .input-focus { transition: all 0.3s ease; }
    .input-focus:focus { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(102,126,234,0.2); }
  </style>
</head>
<body class="min-h-screen relative overflow-x-hidden">

  <!-- هنا نفس الـ HTML للواجهة (النماذج، الأسئلة، النتائج) بدون تغيير -->
  <!-- ... (احتفظت بنفس البنية التي عندك) ... -->

  <script>
    /* نفس جافاسكربت لكن بعد الإصلاحات */
    let currentLanguage = 'ar';
    let currentQuestion = 0;
    let answers = { visual:0, auditory:0, kinesthetic:0 };
    let studentInfo = { name:'', class:'' };

    // 🔥 بقية الكود كما هو (translations, questions, learningStyles...) 
    // ✅ مع إصلاح restartQuiz لتصفير البار:
    function restartQuiz() {
      currentQuestion = 0;
      answers = { visual:0, auditory:0, kinesthetic:0 };
      document.getElementById('results-container').classList.add('hidden');
      document.getElementById('student-form').classList.remove('hidden');
      document.getElementById('student-name').value = '';
      document.getElementById('student-class').value = '';
      document.getElementById('progress-bar').style.width = "0%";
      document.getElementById('progress-text').textContent = currentLanguage==='ar' ? 
        `0 من ${questions[currentLanguage].length}` : 
        `0 of ${questions[currentLanguage].length}`;
    }

    // ✅ عند إنشاء اسم الملف اجعل التاريخ أوضح
    function cleanFileName(base) {
      const dateNow = new Date().toISOString().split("T")[0];
      return `${base}_${dateNow}`;
    }

    // ... بقية دوالك (startQuiz, displayQuestion, showResults, downloadPDF, downloadReport ...) 
    // مع استبدال اسم الملف بـ cleanFileName(studentInfo.name)

    // ✅ تهيئة
    setLanguage('ar');
  </script>
</body>
</html>
